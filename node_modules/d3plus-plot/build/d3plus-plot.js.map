{"version":3,"file":"d3plus-plot.js","sources":["../src/buffers/discreteBuffer.js","../src/buffers/Bar.js","../src/buffers/Box.js","../src/buffers/numericBuffer.js","../src/buffers/Circle.js","../src/buffers/Line.js","../src/buffers/Rect.js","../src/Plot.js","../src/AreaPlot.js","../src/BarChart.js","../src/BoxWhisker.js","../src/BumpChart.js","../src/LinePlot.js","../src/Radar.js","../src/StackedArea.js"],"sourcesContent":["/**\n * Adds left/right padding to a point or time scale.\n * @private\n */\nexport default (scale, data, discrete) => {\n\n  if (scale.padding) scale.padding(0.5);\n  else {\n    const closest = data.map(d => d[discrete]).reduce((acc, curr, i, arr) => {\n      if (!i) return acc;\n      const prev = arr[i - 1];\n      if (!acc || curr - prev < acc) return curr - prev;\n      else return acc;\n    }, 0);\n    const domain = scale.domain().slice();\n    if (discrete === \"y\") domain.reverse();\n    domain[0] = new Date(+domain[0] - closest / 2);\n    domain[1] = new Date(+domain[1] + closest / 2);\n    if (discrete === \"y\") domain.reverse();\n    scale.domain(domain);\n  }\n\n};\n","import {max, min, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport discreteBuffer from \"./discreteBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer = 10]\n    @private\n*/\nexport default function({data, x, y, x2, y2, buffer = 10}) {\n  const xKey = x2 ? \"x2\" : \"x\";\n  const yKey = y2 ? \"y2\" : \"y\";\n\n  const oppScale = this._discrete === \"x\" ? y : x;\n\n  const oppDomain = oppScale.domain().slice();\n\n  const isDiscreteX = this._discrete === \"x\";\n\n  if (isDiscreteX) oppDomain.reverse();\n\n  let negVals, posVals;\n  if (this._stacked) {\n    const groupedData = nest()\n      .key(d => `${d[this._discrete]}_${d.group}`)\n      .entries(data)\n      .map(d => d.values.map(x => x[isDiscreteX ? yKey : xKey]));\n    posVals = groupedData.map(arr => sum(arr.filter(d => d > 0)));\n    negVals = groupedData.map(arr => sum(arr.filter(d => d < 0)));\n  }\n  else {\n    posVals = data.map(d => d[isDiscreteX ? yKey : xKey]);\n    negVals = posVals;\n  }\n\n  let bMax = oppScale(max(posVals));\n  if (isDiscreteX ? bMax < oppScale(0) : bMax > oppScale(0)) bMax += isDiscreteX ? -buffer : buffer;\n  bMax = oppScale.invert(bMax);\n\n  let bMin = oppScale(min(negVals));\n  if (isDiscreteX ? bMin > oppScale(0) : bMin < oppScale(0)) bMin += isDiscreteX ? buffer : -buffer;\n  bMin = oppScale.invert(bMin);\n\n  if (bMax > oppDomain[1]) oppDomain[1] = bMax;\n  if (bMin < oppDomain[0]) oppDomain[0] = bMin;\n\n  if (isDiscreteX) oppDomain.reverse();\n\n  oppScale.domain(oppDomain);\n\n  discreteBuffer(isDiscreteX ? x : y, data, this._discrete);\n\n  return [x, y];\n\n}\n","import {max, min, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport discreteBuffer from \"./discreteBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer = 10]\n    @private\n*/\nexport default function({data, x, y, x2, y2, buffer = 10}) {\n  const xKey = x2 ? \"x2\" : \"x\";\n  const yKey = y2 ? \"y2\" : \"y\";\n\n  const oppScale = this._discrete === \"x\" ? y : x;\n\n  const oppDomain = oppScale.domain().slice();\n\n  const isDiscreteX = this._discrete === \"x\";\n\n  if (isDiscreteX) oppDomain.reverse();\n\n  let negVals, posVals;\n  if (this._stacked) {\n    const groupedData = nest()\n      .key(d => d[this._discrete])\n      .entries(data)\n      .map(d => d.values.map(x => x[isDiscreteX ? yKey : xKey]));\n    posVals = groupedData.map(arr => sum(arr.filter(d => d > 0)));\n    negVals = groupedData.map(arr => sum(arr.filter(d => d < 0)));\n  }\n  else {\n    posVals = data.map(d => d[isDiscreteX ? yKey : xKey]);\n    negVals = posVals;\n  }\n\n  let bMax = oppScale(max(posVals));\n  bMax += isDiscreteX ? -buffer : buffer;\n  bMax = oppScale.invert(bMax);\n\n  let bMin = oppScale(min(negVals));\n  bMin += isDiscreteX ? buffer : -buffer;\n  bMin = oppScale.invert(bMin);\n\n  if (bMax > oppDomain[1]) oppDomain[1] = bMax;\n  if (bMin < oppDomain[0]) oppDomain[0] = bMin;\n\n  if (isDiscreteX) oppDomain.reverse();\n\n  oppScale.domain(oppDomain);\n\n  discreteBuffer(isDiscreteX ? x : y, data, this._discrete);\n\n  return [x, y];\n\n}\n","import {scaleLog} from \"d3-scale\";\n\nconst floor10 = v => Math.pow(10, Math.floor(Math.log10(Math.abs(v)))) * Math.pow(-1, v < 0);\nconst ceil10 = v => Math.pow(10, Math.ceil(Math.log10(Math.abs(v)))) * Math.pow(-1, v < 0);\n\n/** */\nexport default function(axis, scale, value, size, range, domain, index, invert) {\n\n  if (isNaN(domain[0]) || isNaN(domain[1])) return domain;\n\n  if (invert) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  if (domain[0] === domain[1]) {\n    domain = domain.slice();\n    if (scale === \"log\") {\n      domain = [floor10(domain[0]), ceil10(domain[0])];\n      if (domain[1] < domain[0]) domain.reverse();\n    }\n    else {\n      const mod = Math.abs(parseFloat(domain[0].toPrecision(1).replace(/[0-9]{1}$/, \"1\")));\n      domain[0] -= mod;\n      domain[1] += mod;\n    }\n    axis.domain(invert ? domain.slice().reverse() : domain);\n    return invert ? domain.reverse() : domain;\n  }\n\n  const logMod = domain[0] === domain[1] ? 10 : Math.abs(Math.log(domain[1] - domain[0]) / 10);\n\n  const needsBuffer = () => {\n    let tempAxis = axis.copy();\n    let diverging = false;\n    if (scale === \"log\") {\n      let d = axis.domain().slice(),\n          r = axis.range().slice();\n      if (invert) {\n        d = d.reverse();\n        r = r.reverse();\n      }\n      diverging = d[0] * d[1] < 0;\n      if (diverging) {\n        const percentScale = scaleLog().domain([1e-6, Math.abs(d[index])]).range([0, 1]);\n        const leftPercentage = percentScale(Math.abs(d[index ? 0 : 1]));\n        const zero = leftPercentage / (leftPercentage + 1) * (r[1] - r[0]);\n        d = (index === 0 ? [d[0], 1e-6] : [1e-6, d[1]]).map(Math.abs);\n        r = index === 0 ? [r[0], r[0] + zero] : [r[0] + zero, r[1]];\n      }\n      tempAxis = scaleLog()\n        .domain(d)\n        .range(r);\n    }\n\n    let outside = false;\n    const tempRange = tempAxis.range();\n    let pixelValue;\n    if (scale === \"log\") {\n      pixelValue = diverging ? tempAxis(Math.abs(value)) : tempAxis(value);\n    }\n    else pixelValue = tempAxis(value);\n\n    if (invert) {\n      if (index === 0) outside = pixelValue + size > tempRange[index];\n      else if (index === 1) outside = pixelValue - size < tempRange[index];\n    }\n    else {\n      if (index === 0) outside = pixelValue - size < tempRange[index];\n      else if (index === 1) outside = pixelValue + size > tempRange[index];\n    }\n    return outside;\n\n  };\n\n  if (axis.invert && needsBuffer()) {\n    const mod = 10;\n    if (scale === \"log\") {\n      let i = 0;\n      while (i < 10 && needsBuffer()) {\n        const mod = (index === 0 ? -1 : 1) * (domain[index] < 0 ? -1 : 1);\n        domain[index] += domain[index] * logMod * mod;\n        axis.domain(invert ? domain.slice().reverse() : domain);\n        i++;\n      }\n    }\n    else if (index === 0) {\n      const v = axis.invert(axis(value) + (size + mod) * (invert ? 1 : -1));\n      if (v < domain[index]) {\n        domain[index] = v;\n        axis.domain(invert ? domain.slice().reverse() : domain);\n      }\n    }\n    else if (index === 1) {\n      const v = axis.invert(axis(value) + (size + mod) * (invert ? -1 : 1));\n      if (v > domain[index]) {\n        domain[index] = v;\n        axis.domain(invert ? domain.slice().reverse() : domain);\n      }\n    }\n  }\n\n  return invert ? domain.reverse() : domain;\n}\n","import discreteBuffer from \"./discreteBuffer\";\nimport numericBuffer from \"./numericBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer] Defaults to the radius of the largest Circle.\n    @private\n*/\nexport default function({data, x, y, x2, y2, yScale, xScale, config, buffer}) {\n\n  x = x.copy();\n  y = y.copy();\n\n  const xKey = x2 ? \"x2\" : \"x\";\n  const yKey = y2 ? \"y2\" : \"y\";\n\n  let xD = x.domain().slice(),\n      yD = y.domain().slice();\n\n  const xR = x.range(),\n        yR = y.range();\n\n  if (!x.invert && x.padding) discreteBuffer(x, data, this._discrete);\n  if (!y.invert && y.padding) discreteBuffer(y, data, this._discrete);\n\n  if (x.invert || y.invert) {\n\n    data.forEach(d => {\n\n      const s = buffer ? buffer : config.r(d.data, d.i) * 2;\n\n      if (x.invert) {\n        xD = numericBuffer(x, xScale, d[xKey], s, xR, xD, 0, false);\n        xD = numericBuffer(x, xScale, d[xKey], s, xR, xD, 1, false);\n      }\n\n      if (y.invert) {\n        yD = numericBuffer(y, yScale, d[yKey], s, yR, yD, 0, true);\n        yD = numericBuffer(y, yScale, d[yKey], s, yR, yD, 1, true);\n      }\n\n    });\n\n  }\n\n  return [x, y];\n\n}\n","import {max} from \"d3-array\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer] Defaults to the radius of the largest Circle.\n    @private\n*/\nexport default function({data, x, y, x2, y2}) {\n  const xKey = x2 ? \"x2\" : \"x\";\n  const yKey = y2 ? \"y2\" : \"y\";\n\n  const s = this._discrete === \"x\" ? y : x;\n\n  const d = s.domain().slice();\n\n  if (this._discrete === \"x\") d.reverse();\n\n  const vals = data.map(d => d[this._discrete === \"x\" ? yKey : xKey]);\n  const b = s.invert(s(max(vals)) + (this._discrete === \"x\" ? -10 : 10));\n\n  if (b > d[1]) d[1] = b;\n\n  if (this._discrete === \"x\") d.reverse();\n\n  s.domain(d);\n\n  return [x, y];\n\n}\n","import discreteBuffer from \"./discreteBuffer\";\nimport numericBuffer from \"./numericBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer] Defaults to the width/height of the largest Rect.\n    @private\n*/\nexport default function({data, x, y, x2, y2, yScale, xScale, config}) {\n\n  x = x.copy();\n  y = y.copy();\n\n  const xKey = x2 ? \"x2\" : \"x\";\n  const yKey = y2 ? \"y2\" : \"y\";\n\n  let xD = x.domain().slice(),\n      yD = y.domain().slice();\n\n  const xR = x.range(),\n        yR = y.range();\n\n  if (!x.invert && x.padding) discreteBuffer(x, data, this._discrete);\n  if (!y.invert && y.padding) discreteBuffer(y, data, this._discrete);\n\n  if (x.invert || y.invert) {\n\n    data.forEach(d => {\n\n      if (x.invert) {\n        const w = config.width(d.data, d.i);\n        xD = numericBuffer(x, xScale, d[xKey], w, xR, xD, 0, false);\n        xD = numericBuffer(x, xScale, d[xKey], w, xR, xD, 1, false);\n      }\n\n      if (y.invert) {\n        const h = config.height(d.data, d.i);\n        yD = numericBuffer(y, yScale, d[yKey], h, yR, yD, 0, true);\n        yD = numericBuffer(y, yScale, d[yKey], h, yR, yD, 1, true);\n      }\n\n    });\n\n  }\n\n  return [x, y];\n\n}\n\n","/* eslint no-cond-assign: 0 */\n\nimport {deviation, extent, max, mean, merge, min, range, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport * as scales from \"d3-scale\";\nimport * as d3Shape from \"d3-shape\";\n\nimport {AxisBottom, AxisLeft, AxisRight, AxisTop, date} from \"d3plus-axis\";\nimport {colorAssign, colorContrast, colorDefaults, colorLegible} from \"d3plus-color\";\nimport {accessor, assign, configPrep, constant, elem, unique} from \"d3plus-common\";\nimport * as shapes from \"d3plus-shape\";\nimport {textWidth, TextBox} from \"d3plus-text\";\nconst testLineShape = new shapes.Line();\nconst testTextBox = new TextBox();\nimport {Viz} from \"d3plus-viz\";\n\nimport {default as BarBuffer} from \"./buffers/Bar.js\";\nimport {default as BoxBuffer} from \"./buffers/Box.js\";\nimport {default as CircleBuffer} from \"./buffers/Circle.js\";\nimport {default as LineBuffer} from \"./buffers/Line.js\";\nimport {default as RectBuffer} from \"./buffers/Rect.js\";\n\n/**\n    @desc Logic for determining default sizes of shapes using the sizeScaleD3 internal function.\n    @private\n*/\nfunction defaultSize(d) {\n  return this._sizeScaleD3(this._size ? this._size(d) : null);\n}\n\n/**\n    @desc Logic for determining stackOrder ascending using groups.\n    @private\n*/\nfunction stackOrderAscending(series) {\n  const sums = series.map(stackSum);\n  const keys = series.map(d => d.key.split(\"_\")[0]);\n  return d3Shape.stackOrderNone(series).sort((a, b) => keys[b].localeCompare(keys[a]) || sums[a] - sums[b]);\n}\n\n/**\n    @desc Logic for determining stackOrder descending using groups.\n    @private\n*/\nfunction stackOrderDescending(series) {\n  return stackOrderAscending(series).reverse();\n}\n\n/**\n    @desc Logic for determining default sum of shapes using the stackSum function used in d3Shape.\n    @private\n*/\nfunction stackSum(series) {\n  let i = -1, s = 0, v;\n  const n = series.length;\n  while (++i < n) if (v = +series[i][1]) s += v;\n  return s;\n}\n\n/**\n    @desc Logic for determining default sum of shapes using the stackSum function used in d3Shape.\n    @private\n*/\nfunction stackOffsetDiverging(series, order) {\n  let n;\n  if (!((n = series.length) > 0)) return;\n  let d, dy, i, yn, yp;\n  const m = series[order[0]].length;\n  for (let j = 0; j < m; ++j) {\n    for (yp = yn = 0, i = 0; i < n; ++i) {\n      if ((dy = (d = series[order[i]][j])[1] - d[0]) >= 0) {\n        d[0] = yp, d[1] = yp += dy;\n      }\n      else if (dy < 0) {\n        d[1] = yn, d[0] = yn += dy;\n      }\n      else {\n        d[0] = yp;\n      }\n    }\n  }\n}\n\n/**\n * Determines if a Bar label should be placed outside of the Bar.\n * @param {@} d\n * @param {*} i\n * @private\n */\nfunction outside(d, i) {\n  if (this._stacked) return false;\n  const other = this._discrete.charAt(0) === \"x\" ? \"y\" : \"x\";\n  const nonDiscrete = this._discrete.replace(this._discrete.charAt(0), other);\n  const range = this[`_${nonDiscrete}Axis`]._d3Scale.range();\n  const value = this[`_${nonDiscrete}`](d, i);\n  const negative = value < 0;\n  const zero = this[`_${nonDiscrete}Axis`]._getPosition(0);\n  const space = nonDiscrete === \"y\"\n    ? negative ? range[1] - zero : zero - range[0]\n    : negative ? zero - range[0] : range[1] - zero;\n  const pos = this[`_${nonDiscrete}Axis`]._getPosition(value);\n  const size = Math.abs(pos - zero);\n  return size < space / 2;\n}\n\n/**\n    @class Plot\n    @extends Viz\n    @desc Creates an x/y plot based on an array of data.\n*/\nexport default class Plot extends Viz {\n\n  /**\n      @memberof Plot\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._annotations = [];\n    this._backgroundConfig = {\n      duration: 0,\n      fill: \"transparent\"\n    };\n    this._barPadding = 0;\n    this._buffer = {\n      Bar: BarBuffer,\n      Box: BoxBuffer,\n      Circle: CircleBuffer,\n      Line: LineBuffer,\n      Rect: RectBuffer\n    };\n    this._confidenceConfig = {\n      fill: (d, i) => {\n        const c = typeof this._shapeConfig.Line.stroke === \"function\"\n          ? this._shapeConfig.Line.stroke(d, i)\n          : this._shapeConfig.Line.stroke;\n        return c;\n      },\n      fillOpacity: constant(0.5)\n    };\n    this._discreteCutoff = 100;\n    this._groupPadding = 5;\n    this._lineMarkerConfig = {\n      fill: (d, i) => colorAssign(this._id(d, i)),\n      r: constant(3)\n    };\n    this._lineMarkers = false;\n    this._previousShapes = [];\n    this._shape = constant(\"Circle\");\n    this._shapeConfig = assign(this._shapeConfig, {\n      Area: {\n        label: (d, i) => this._stacked ? this._drawLabel(d, i) : false,\n        labelBounds: (d, i, aes) => {\n          let r = shapes.largestRect(aes.points, {angle: range(-20, 20, 5)});\n          if (!r || r.height < 20 || r.width < 50) r = shapes.largestRect(aes.points, {angle: range(-80, 80, 5)});\n          if (!r) return null;\n          const x = min(aes.points, d => d[0]);\n          const y = max(aes.points.filter(d => d[0] === x), d => d[1]);\n          return {\n            angle: r.angle,\n            width: r.width,\n            height: r.height,\n            x: r.cx - r.width / 2 - x,\n            y: r.cy - r.height / 2 - y\n          };\n        },\n        labelConfig: {\n          fontMin: 6,\n          fontResize: true,\n          padding: 10\n        }\n      },\n      ariaLabel: (d, i) => {\n        let ariaLabelStr = \"\";\n        if (d.nested) ariaLabelStr = `${this._drawLabel(d.data, d.i)}`;\n        else {\n          ariaLabelStr = `${this._drawLabel(d, i)}`;\n          if (this._x(d, i) !== undefined) ariaLabelStr += `, x: ${this._x(d, i)}`;\n          if (this._y(d, i) !== undefined) ariaLabelStr += `, y: ${this._y(d, i)}`;\n          if (this._x2(d, i) !== undefined) ariaLabelStr += `, x2: ${this._x2(d, i)}`;\n          if (this._y2(d, i) !== undefined) ariaLabelStr += `, y2: ${this._y2(d, i)}`;\n        }\n        return `${ariaLabelStr}.`;\n      },\n      Bar: {\n        labelBounds(d, i, s) {\n\n          const padding = 1;\n\n          const width = this._discrete === \"y\" ? \"width\" : \"height\";\n          const height = this._discrete === \"y\" ? \"height\" : \"width\";\n\n          const other = this._discrete.charAt(0) === \"x\" ? \"y\" : \"x\";\n          const invert = other === \"y\";\n          const nonDiscrete = this._discrete.replace(this._discrete.charAt(0), other);\n          const range = this[`_${nonDiscrete}Axis`]._d3Scale.range();\n          const space = Math.abs(range[1] - range[0]);\n          const negative = this[`_${nonDiscrete}`](d, i) < 0;\n\n          if (outside.bind(this)(d, i)) {\n            return {\n              [width]: space - s[width],\n              [height]: s[height],\n              x: invert ? -s.width / 2 : negative ? -space : s.width + padding,\n              y: invert ? negative ? s.height + padding : -space : -s.height / 2 + 1\n            };\n          }\n          return {\n            [width]: s[width],\n            [height]: s[height],\n            x: invert ? -s.width / 2 : negative ? this._stacked ? padding : padding - s.width : -padding,\n            y: invert ? negative ? this._stacked ? padding - s.height : padding : -s.height + padding : -s.height / 2 + padding\n          };\n\n        },\n        labelConfig: {\n          fontMax: 16,\n          fontMin: 6,\n          fontResize: true,\n          fontColor(d, i) {\n            return outside.bind(this)(d, i)\n              ? this._backgroundConfig.fill === \"transparent\"\n                ? colorDefaults.dark\n                : colorContrast(this._backgroundConfig.fill)\n              : colorContrast(typeof this._shapeConfig.fill === \"function\" ? this._shapeConfig.fill(d, i) : this._shapeConfig.fill);\n          },\n          fontStroke(d, i) {\n            return outside.bind(this)(d, i)\n              ? this._backgroundConfig.fill === \"transparent\"\n                ? colorDefaults.dark\n                : colorContrast(this._backgroundConfig.fill)\n              : \"transparent\";\n          },\n          fontStrokeWidth(d, i) {\n            return outside.bind(this)(d, i) ? 0.1 : 0;\n          },\n          padding: 3,\n          textAnchor(d, i) {\n            const other = this._discrete.charAt(0) === \"x\" ? \"y\" : \"x\";\n            const invert = other === \"y\";\n            const nonDiscrete = this._discrete.replace(this._discrete.charAt(0), other);\n            const negative = this[`_${nonDiscrete}`](d, i) < 0;\n            return invert\n              ? \"middle\"\n              : outside.bind(this)(d, i)\n                ? negative ? \"end\" : \"start\"\n                : negative ? \"start\" : \"end\";\n          },\n          verticalAlign(d, i) {\n            const other = this._discrete.charAt(0) === \"x\" ? \"y\" : \"x\";\n            const invert = other === \"y\";\n            const nonDiscrete = this._discrete.replace(this._discrete.charAt(0), other);\n            const negative = this[`_${nonDiscrete}`](d, i) < 0;\n            return invert\n              ? outside.bind(this)(d, i)\n                ? negative ? \"top\" : \"bottom\"\n                : negative ? \"bottom\" : \"top\"\n              : \"middle\";\n          }\n        }\n      },\n      Circle: {\n        r: defaultSize.bind(this)\n      },\n      Line: {\n        curve: () => this._discrete ? `monotone${this._discrete.charAt(0).toUpperCase()}` : \"linear\",\n        fill: constant(\"none\"),\n        labelConfig: {\n          fontColor: (d, i) => {\n            const c = typeof this._shapeConfig.Line.stroke === \"function\"\n              ? this._shapeConfig.Line.stroke(d, i)\n              : this._shapeConfig.Line.stroke;\n            return colorLegible(c);\n          },\n          fontResize: false,\n          padding: 5,\n          textAnchor: \"start\",\n          verticalAlign: \"middle\"\n        },\n        stroke: (d, i) => colorAssign(this._id(d, i)),\n        strokeWidth: constant(2)\n      },\n      Rect: {\n        height: d => defaultSize.bind(this)(d) * 2,\n        width: d => defaultSize.bind(this)(d) * 2\n      }\n    });\n    this._shapeOrder = [\"Area\", \"Path\", \"Bar\", \"Box\", \"Line\", \"Rect\", \"Circle\"];\n    this._shapeSort = (a, b) => this._shapeOrder.indexOf(a) - this._shapeOrder.indexOf(b);\n    this._sizeMax = 20;\n    this._sizeMin = 5;\n    this._sizeScale = \"sqrt\";\n    this._stackOffset = stackOffsetDiverging;\n    this._stackOrder = stackOrderDescending;\n    this._timelineConfig = assign(this._timelineConfig, {brushing: true});\n\n    this._x = accessor(\"x\");\n    this._xAxis = new AxisBottom().align(\"end\");\n    this._xTest = new AxisBottom().align(\"end\").gridSize(0);\n    this._xConfig = {\n      gridConfig: {\n        stroke: d => {\n          if (this._discrete && this._discrete.charAt(0) === \"x\") return \"transparent\";\n          const range = this._xAxis.range();\n          // hides left-most x gridline so it doesn't overlap with the y axis\n          return range[0] === this._xAxis._getPosition.bind(this._xAxis)(d.id) ? \"transparent\" : \"#eee\";\n        }\n      }\n    };\n    this._xCutoff = 150;\n\n    this._x2 = accessor(\"x2\");\n    this._x2Axis = new AxisTop().align(\"start\");\n    this._x2Test = new AxisTop().align(\"start\").gridSize(0);\n    this._x2Config = {\n      padding: 0\n    };\n\n    this._y = accessor(\"y\");\n    this._yAxis = new AxisLeft().align(\"start\");\n    this._yTest = new AxisLeft().align(\"start\").gridSize(0);\n    this._yConfig = {\n      gridConfig: {\n        stroke: d => {\n          if (this._discrete && this._discrete.charAt(0) === \"y\") return \"transparent\";\n          const range = this._yAxis.range();\n          // hides bottom-most y gridline so it doesn't overlap with the x axis\n          return range[range.length - 1] === this._yAxis._getPosition.bind(this._yAxis)(d.id) ? \"transparent\" : \"#eee\";\n        }\n      }\n    };\n    this._yCutoff = 150;\n\n    this._y2 = accessor(\"y2\");\n    this._y2Axis = new AxisRight().align(\"end\");\n    this._y2Test = new AxisLeft().align(\"end\").gridSize(0);\n    this._y2Config = {};\n\n  }\n\n  /**\n      Extends the preDraw behavior of the abstract Viz class.\n      @private\n  */\n  _preDraw() {\n\n    // logic repeated for each axis\n    [\"x\", \"y\", \"x2\", \"y2\"].forEach(k => {\n\n      // if user has supplied a String key as the main method value\n      if (this[`_${k}Key`]) {\n\n        const str = this[`_${k}Key`];\n\n        // if axis is discrete and numerical, do not sum values\n        if (!this._aggs[str] && this._discrete === k) {\n          this._aggs[str] = (a, c) => {\n            const v = Array.from(new Set(a.map(c)));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n\n        // set axis title if not discrete\n        if (str !== k && this[`_${k}Title`] === this[`_${k}Config`].title && this._discrete !== k) {\n          this[`_${k}Title`] = str;\n          this[`_${k}Config`].title = str;\n        }\n\n      }\n\n    });\n\n    super._preDraw();\n\n  }\n\n  /**\n      Extends the draw behavior of the abstract Viz class.\n      @private\n  */\n  _draw(callback) {\n\n    if (!this._filteredData.length) return this;\n\n    const stackGroup = (d, i) => this._stacked\n      ? `${this._groupBy.length > 1 ? this._ids(d, i).slice(0, -1).join(\"_\") : \"group\"}`\n      : `${this._ids(d, i).join(\"_\")}`;\n\n    let data = this._filteredData.map((d, i) => ({\n      __d3plus__: true,\n      data: d,\n      group: stackGroup(d, i),\n      i,\n      hci: this._confidence && this._confidence[1] && this._confidence[1](d, i),\n      id: this._ids(d, i).slice(0, this._drawDepth + 1).join(\"_\"),\n      lci: this._confidence && this._confidence[0] && this._confidence[0](d, i),\n      shape: this._shape(d, i),\n      x: this._x(d, i),\n      x2: this._x2(d, i),\n      y: this._y(d, i),\n      y2: this._y2(d, i)\n    }));\n\n    this._formattedData = data;\n\n    if (this._size) {\n      const rExtent = extent(data, d => this._size(d.data));\n      this._sizeScaleD3 = () => this._sizeMin;\n      this._sizeScaleD3 = scales[`scale${this._sizeScale.charAt(0).toUpperCase()}${this._sizeScale.slice(1)}`]()\n        .domain(rExtent)\n        .range([rExtent[0] === rExtent[1] ? this._sizeMax : min([this._sizeMax / 2, this._sizeMin]), this._sizeMax]);\n    }\n    else {\n      this._sizeScaleD3 = () => this._sizeMin;\n    }\n\n    const x2Exists = data.some(d => d.x2 !== undefined),\n          y2Exists = data.some(d => d.y2 !== undefined);\n\n    const height = this._height - this._margin.top - this._margin.bottom,\n          opp = this._discrete ? this._discrete === \"x\" ? \"y\" : \"x\" : undefined,\n          opp2 = this._discrete ? this._discrete === \"x\" ? \"y2\" : \"x2\" : undefined,\n          opps = [opp, opp2].filter(d => d),\n          parent = this._select,\n          transition = this._transition,\n          width = this._width - this._margin.left - this._margin.right;\n\n    const x2Time = this._x2Time = this._time && data[0].x2 === this._time(data[0].data, data[0].i),\n          xTime = this._xTime = this._time && data[0].x === this._time(data[0].data, data[0].i),\n          y2Time = this._y2Time = this._time && data[0].y2 === this._time(data[0].data, data[0].i),\n          yTime = this._yTime = this._time && data[0].y === this._time(data[0].data, data[0].i);\n\n    for (let i = 0; i < data.length; i++) {\n      const d = data[i];\n      if (xTime) d.x = date(d.x);\n      if (x2Time) d.x2 = date(d.x2);\n      if (yTime) d.y = date(d.y);\n      if (y2Time) d.y2 = date(d.y2);\n      d.discrete = d.shape === \"Bar\" ? `${d[this._discrete]}_${d.group}` : `${d[this._discrete]}`;\n    }\n\n    /**\n     * @desc Returns all unique values for a given axis.\n     * @param {String} axis\n     * @returns {Array}\n     * @private\n     */\n    function getValues(axis) {\n      let axisData = data\n        .filter(d => d[axis])\n        .sort((a, b) => this[`_${axis}Sort`] ? this[`_${axis}Sort`](a.data, b.data) : a[axis] - b[axis])\n        .map(d => d[axis]);\n      if (this._discrete !== axis.charAt(0) && this._confidence) {\n        if (this._confidence[0]) axisData = axisData.concat(data.map(d => d.lci));\n        if (this._confidence[1]) axisData = axisData.concat(data.map(d => d.hci));\n      }\n      return unique(axisData, d => `${d}`);\n    }\n\n    const xData = getValues.bind(this)(\"x\");\n    const x2Data = getValues.bind(this)(\"x2\");\n    const yData = getValues.bind(this)(\"y\");\n    const y2Data = getValues.bind(this)(\"y2\");\n\n    const hasBars = data.some(d => d.shape === \"Bar\");\n\n    let discreteKeys, domains, stackData, stackKeys;\n    if (this._stacked) {\n\n      const groupValues = nest()\n        .key(d => d.group)\n        .entries(data)\n        .reduce((obj, d) => {\n          if (!obj[d.key]) obj[d.key] = 0;\n          obj[d.key] += sum(d.values, dd => dd[opp]);\n          return obj;\n        }, {});\n\n      data = data.sort((a, b) => {\n        if (this[`_${this._discrete}Sort`]) return this[`_${this._discrete}Sort`](a.data, b.data);\n        const a1 = a[this._discrete], b1 = b[this._discrete];\n        if (a1 - b1 !== 0) return a1 - b1;\n        if (a.group !== b.group) return groupValues[b.group] - groupValues[a.group];\n        return b[opp] - a[opp];\n      });\n\n      discreteKeys = Array.from(new Set(data.map(d => d.discrete)));\n      stackKeys = Array.from(new Set(data.map(d => d.id)));\n\n      stackData = nest()\n        .key(d => d.discrete)\n        .entries(data)\n        .map(d => d.values);\n\n      stackData.forEach(g => {\n        const ids = Array.from(new Set(g.map(d => d.id)));\n        if (ids.length < stackKeys.length) {\n          stackKeys.forEach(k => {\n            if (!ids.includes(k)) {\n              const d = data.filter(d => d.id === k)[0];\n              if (d.shape === \"Area\") {\n                const group = stackGroup(d.data, d.i);\n                const fillerPoint = {\n                  __d3plus__: true,\n                  data: d.data,\n                  discrete: d.shape === \"Bar\" ? `${g[0][this._discrete]}_${group}` : `${g[0][this._discrete]}`,\n                  group,\n                  id: k,\n                  shape: d.shape,\n                  [this._discrete]: g[0][this._discrete],\n                  [opp]: 0\n                };\n                data.push(fillerPoint);\n              }\n            }\n          });\n        }\n      });\n\n      if (this[`_${this._discrete}Sort`]) {\n        data.sort((a, b) => this[`_${this._discrete}Sort`](a.data, b.data));\n      }\n      else {\n        data.sort((a, b) => a[this._discrete] - b[this._discrete]);\n      }\n\n      const order = this._stackOrder;\n\n      if (order instanceof Array) stackKeys.sort((a, b) => order.indexOf(a) - order.indexOf(b));\n      else if (order === d3Shape.stackOrderNone) stackKeys.sort((a, b) => a.localeCompare(b));\n\n      stackData = d3Shape.stack()\n        .keys(stackKeys)\n        .offset(this._stackOffset)\n        .order(order instanceof Array ? d3Shape.stackOrderNone : order)\n        .value((group, key) => {\n          const d = group.filter(g => g.id === key);\n          return d.length ? d[0][opp] : 0;\n        })(stackData);\n\n      const discreteData = this._discrete === \"x\" ? xData : yData;\n\n      domains = {\n        [this._discrete]: !hasBars && this[`_${this._discrete}Time`] ? extent(discreteData) : discreteData,\n        [opp]: [min(stackData.map(g => min(g.map(p => p[0])))), max(stackData.map(g => max(g.map(p => p[1]))))]\n      };\n\n    }\n    else {\n\n      const discrete = this._discrete || \"x\";\n\n      if (this[`_${this._discrete}Sort`]) {\n        data.sort((a, b) => this[`_${this._discrete}Sort`](a.data, b.data));\n      }\n      else {\n        data.sort((a, b) => a[discrete] - b[discrete]);\n      }\n\n      domains = {\n        x: (hasBars || !xTime) && this._discrete === \"x\" || this._xSort ? xData : extent(xData),\n        x2: (hasBars || !x2Time) && this._discrete === \"x\" || this._x2Sort ? x2Data : extent(x2Data),\n        y: (hasBars || !yTime) && this._discrete === \"y\" || this._ySort ? yData : extent(yData),\n        y2: (hasBars || !y2Time) && this._discrete === \"y\" || this._y2Sort ? y2Data : extent(y2Data)\n      };\n    }\n\n    /**\n     * Determins default scale type and domain for a given axis.\n     * @param {String} axis\n     * @private\n     */\n    function domainScaleSetup(axis) {\n\n      const scale = !hasBars && this[`_${axis}Time`] ? \"Time\" : this._discrete === axis || this[`_${axis}Sort`] ? \"Point\" : \"Linear\";\n\n      const domain = this[`_${axis}Domain`] ? this[`_${axis}Domain`].slice() : domains[axis],\n            domain2 = this[`_${axis}2Domain`] ? this[`_${axis}2Domain`].slice() : domains[`${axis}2`];\n\n      if (scale !== \"Point\") {\n        if (domain && domain[0] === void 0) domain[0] = domains[axis][0];\n        if (domain && domain[1] === void 0) domain[1] = domains[axis][1];\n\n        if (domain2 && domain2[0] === void 0) domain2[0] = domains[`${axis}2`][0];\n        if (domain2 && domain2[1] === void 0) domain2[1] = domains[`${axis}2`][1];\n      }\n\n      return [domain, scale, domain2, scale];\n\n    }\n\n    const [xAutoDomain, xScale, x2AutoDomain, x2Scale] = domainScaleSetup.bind(this)(\"x\");\n    const [yAutoDomain, yScale, y2AutoDomain, y2Scale] = domainScaleSetup.bind(this)(\"y\");\n\n    const autoScale = (axis, fallback) => {\n      const userScale = this[`_${axis}Config`].scale;\n      if (userScale === \"auto\") {\n        if (this._discrete === axis) return fallback;\n        const values = data.map(d => d[axis]);\n        return deviation(values) / mean(values) > 3 ? \"log\" : \"linear\";\n      }\n      return userScale || fallback;\n    };\n\n    const yConfigScale = this._yConfigScale = autoScale(\"y\", yScale).toLowerCase();\n    const y2ConfigScale = this._y2ConfigScale = autoScale(\"y2\", y2Scale).toLowerCase();\n    const xConfigScale = this._xConfigScale = autoScale(\"x\", xScale).toLowerCase();\n    const x2ConfigScale = this._x2ConfigScale = autoScale(\"x2\", x2Scale).toLowerCase();\n\n    domains = {x: xAutoDomain, x2: x2AutoDomain || xAutoDomain, y: yAutoDomain, y2: y2AutoDomain || yAutoDomain};\n    Object.keys(domains)\n      .forEach(axis => {\n        if (this[`_${axis}ConfigScale`] === \"log\" && domains[axis].includes(0)) {\n          if (min(domains[axis]) < 0) domains[axis][1] = max(data.map(d => d[axis]).filter(Boolean));\n          else domains[axis][0] = min(data.map(d => d[axis]).filter(Boolean));\n        }\n      });\n\n    opps.forEach(opp => {\n      if (this[`_${opp}Config`].domain) {\n        const d = this[`_${opp}Config`].domain;\n        if (this._discrete === \"x\") d.reverse();\n        domains[opp] = d;\n      }\n      else if (opp && this._baseline !== void 0) {\n        const b = this._baseline;\n        if (domains[opp] && domains[opp][0] > b) domains[opp][0] = b;\n        else if (domains[opp] && domains[opp][1] < b) domains[opp][1] = b;\n      }\n    });\n\n    let x = scales[`scale${xScale}`]().domain(domains.x).range(range(0, width + 1, width / (domains.x.length - 1))),\n        x2 = scales[`scale${x2Scale}`]().domain(domains.x2).range(range(0, width + 1, width / (domains.x2.length - 1))),\n        y = scales[`scale${yScale}`]().domain(domains.y.reverse()).range(range(0, height + 1, height / (domains.y.length - 1))),\n        y2 = scales[`scale${y2Scale}`]().domain(domains.y2.reverse()).range(range(0, height + 1, height / (domains.y2.length - 1)));\n\n    const shapeData = nest()\n      .key(d => d.shape)\n      .entries(data)\n      .sort((a, b) => this._shapeSort(a.key, b.key));\n\n    const oppScale = this._discrete === \"x\" ? yScale : xScale;\n    if (oppScale !== \"Point\") {\n      shapeData.forEach(d => {\n        if (this._buffer[d.key]) {\n          const res = this._buffer[d.key].bind(this)({data: d.values, x, y, yScale: yConfigScale, xScale: xConfigScale, config: this._shapeConfig[d.key]});\n          x = res[0];\n          y = res[1];\n          const res2 = this._buffer[d.key].bind(this)({data: d.values, x: x2, y: y2, yScale: y2ConfigScale, xScale: x2ConfigScale, x2: true, y2: true, config: this._shapeConfig[d.key]});\n          x2 = res2[0];\n          y2 = res2[1];\n        }\n      });\n    }\n\n    const xDomain = x.domain();\n    const x2Domain = x2.domain();\n    const yDomain = y.domain();\n    const y2Domain = y2.domain();\n\n    const defaultConfig = {\n      barConfig: {\"stroke-width\": 0},\n      gridSize: 0,\n      labels: [],\n      title: false,\n      tickSize: 0\n    };\n\n    const defaultX2Config = x2Exists ? {data: x2Data} : defaultConfig;\n    const defaultY2Config = y2Exists ? {data: y2Data} : defaultConfig;\n    const showX = this._discrete === \"x\" && this._width > this._discreteCutoff || this._width > this._xCutoff;\n    const showY = this._discrete === \"y\" && this._height > this._discreteCutoff || this._height > this._yCutoff;\n\n    const yC = {\n      data: yData,\n      locale: this._locale,\n      scalePadding: y.padding ? y.padding() : 0\n    };\n    if (!showX) {\n      yC.barConfig = {stroke: \"transparent\"};\n      yC.tickSize = 0;\n      yC.shapeConfig = {\n        labelBounds: (d, i) => {\n          const {width, y} = d.labelBounds;\n          const height = this._height / 2;\n          const x = i ? -height : 0;\n          return {x, y, width, height};\n        },\n        labelConfig: {\n          padding: 0,\n          rotate: 0,\n          verticalAlign: d => d.id === yTicks[0] ? \"top\" : \"bottom\"\n        },\n        labelRotation: false\n      };\n    }\n\n    const testGroup = elem(\"g.d3plus-plot-test\", {enter: {opacity: 0}, parent: this._select});\n\n    let x2Ticks = this._discrete === \"x\" ? domains.x2 : undefined,\n        xTicks = !showY ? extent(domains.x) : this._discrete === \"x\" ? domains.x : undefined,\n        y2Ticks = this._discrete === \"y\" ? domains.y2 : undefined,\n        yTicks = !showX ? extent(domains.y) : this._discrete === \"y\" ? domains.y : undefined;\n\n    /**\n     * Hides an axis' ticks and labels if they all exist as labels for the data to be displayed,\n     * primarily occuring in simple BarChart visualizations where the both the x-axis ticks and\n     * the Bar rectangles would be displaying the same text.\n     */\n\n    // generates an Array of String labels using the current label function for Bar shapes\n    const barConfig = configPrep.bind(this)(this._shapeConfig, \"shape\", \"Bar\");\n    const barLabelFunction = barConfig.label !== undefined\n      ? typeof barConfig.label === \"function\" ? barConfig.label : constant(barConfig.label)\n      : this._drawLabel;\n    const barLabels = this._filteredData.map((d, i) => barLabelFunction(d, i)).filter(d => typeof d === \"number\" || d).map(String);\n\n    // sets an axis' ticks to [] if the axis scale is \"Point\" (discrete) and every tick String\n    // is also in the barLabels Array\n    if (x2Scale === \"Point\" && x2Ticks instanceof Array && x2Ticks.every(t => barLabels.includes(`${t}`))) x2Ticks = [];\n    if (xScale === \"Point\" && xTicks instanceof Array && xTicks.every(t => barLabels.includes(`${t}`))) xTicks = [];\n    if (y2Scale === \"Point\" && y2Ticks instanceof Array && y2Ticks.every(t => barLabels.includes(`${t}`))) y2Ticks = [];\n    if (yScale === \"Point\" && yTicks instanceof Array && yTicks.every(t => barLabels.includes(`${t}`))) yTicks = [];\n\n    if (showY) {\n      this._yTest\n        .domain(yDomain)\n        .height(height)\n        .maxSize(width / 2)\n        .range([undefined, undefined])\n        .select(testGroup.node())\n        .ticks(yTicks)\n        .width(width)\n        .config(yC)\n        .config(this._yConfig)\n        .scale(yConfigScale)\n        .render();\n    }\n\n    let yBounds = this._yTest.outerBounds();\n    let yWidth = yBounds.width ? yBounds.width + this._yTest.padding() : undefined;\n\n    if (y2Exists) {\n      this._y2Test\n        .domain(y2Domain)\n        .height(height)\n        .range([undefined, undefined])\n        .select(testGroup.node())\n        .ticks(y2Ticks)\n        .width(width)\n        .config(yC)\n        .config(defaultY2Config)\n        .config(this._y2Config)\n        .scale(y2ConfigScale)\n        .render();\n    }\n\n    let y2Bounds = this._y2Test.outerBounds();\n    let y2Width = y2Bounds.width ? y2Bounds.width + this._y2Test.padding() : undefined;\n    const xC = {\n      data: xData,\n      locale: this._locale,\n      scalePadding: x.padding ? x.padding() : 0\n    };\n    if (!showY) {\n      xC.barConfig = {stroke: \"transparent\"};\n      xC.tickSize = 0;\n      xC.shapeConfig = {\n        labelBounds: (d, i) => {\n          const {height, y} = d.labelBounds;\n          const width = this._width / 2;\n          const x = i ? -width : 0;\n          return {x, y, width, height};\n        },\n        labelConfig: {\n          padding: 0,\n          rotate: 0,\n          textAnchor: d => d.id === xTicks[0] ? \"start\" : \"end\"\n        },\n        labelRotation: false\n      };\n    }\n\n    let xRangeMax = undefined;\n\n    if (showX) {\n      this._xTest\n        .domain(xDomain)\n        .height(height)\n        .maxSize(height / 2)\n        .range([undefined, xRangeMax])\n        .select(testGroup.node())\n        .ticks(xTicks)\n        .width(width)\n        .config(xC)\n        .config(this._xConfig)\n        .scale(xConfigScale)\n        .render();\n    }\n\n    let largestLabel;\n    if (this._lineLabels) {\n      const lineData = nest()\n        .key(d => d.id)\n        .entries(data.filter(d => d.shape === \"Line\"));\n\n      if (lineData.length) {\n\n        const userConfig = configPrep.bind(this)(this._shapeConfig, \"shape\", \"Line\");\n        testLineShape.config(userConfig);\n        const lineLabelConfig = testLineShape.labelConfig();\n        const fontSizeAccessor = lineLabelConfig.fontSize !== undefined ? lineLabelConfig.fontSize : testTextBox.fontSize();\n        const fontWeightAccessor = lineLabelConfig.fontWeight !== undefined ? lineLabelConfig.fontWeight : testTextBox.fontWeight();\n        const fontFamilyAccessor = lineLabelConfig.fontFamily !== undefined ? lineLabelConfig.fontFamily : testTextBox.fontFamily();\n        const paddingAccessor = lineLabelConfig.padding !== undefined ? lineLabelConfig.padding : testTextBox.padding();\n        const labelFunction = userConfig.label || this._drawLabel;\n\n        const xEstimate = d => {\n          if (xConfigScale === \"log\" && d === 0) d = xDomain[0] < 0 ? this._xTest._d3Scale.domain()[1] : this._xTest._d3Scale.domain()[0];\n          return this._xTest._getPosition.bind(this._xTest)(d);\n        };\n\n        const maxX = max(lineData.map(group => max(group.values.map(d => xEstimate(d.x)))));\n\n        const labelWidths = lineData.map(group => {\n\n          let d = group.values[group.values.length - 1];\n          let i;\n          while (d.__d3plus__ && d.data) {\n            d = d.data;\n            i = d.i;\n          }\n          const label = typeof labelFunction === \"function\" ? labelFunction(d, i) : labelFunction;\n\n          const fontSize = typeof fontSizeAccessor === \"function\" ? fontSizeAccessor(d, i) : fontSizeAccessor;\n          const fontWeight = typeof fontWeightAccessor === \"function\" ? fontWeightAccessor(d, i) : fontWeightAccessor;\n          let fontFamily = typeof fontFamilyAccessor === \"function\" ? fontFamilyAccessor(d, i) : fontFamilyAccessor;\n          if (fontFamily instanceof Array) fontFamily = fontFamily.map(f => `'${f}'`).join(\", \");\n          const labelPadding = typeof paddingAccessor === \"function\" ? paddingAccessor(d, i) : paddingAccessor;\n\n          const labelWidth = textWidth(label, {\n            \"font-size\": fontSize,\n            \"font-family\": fontFamily,\n            \"font-weight\": fontWeight\n          });\n\n          const myMaxX = max(group.values.map(d => xEstimate(d.x)));\n\n          return {\n            labelWidth: labelWidth + labelPadding * 2,\n            spaceNeeded: myMaxX - maxX + labelWidth + labelPadding * 2\n          };\n\n        });\n        largestLabel = max(labelWidths.map(d => d.labelWidth));\n        const spaceNeeded = max(labelWidths.map(d => d.spaceNeeded));\n        const labelSpace = min([spaceNeeded, width / 4]);\n        xRangeMax = width - labelSpace - this._margin.right;\n      }\n    }\n\n    if (showX && xRangeMax) {\n      this._xTest\n        .domain(xDomain)\n        .height(height)\n        .maxSize(height / 2)\n        .range([undefined, xRangeMax])\n        .select(testGroup.node())\n        .ticks(xTicks)\n        .width(width)\n        .config(xC)\n        .config(this._xConfig)\n        .scale(xConfigScale)\n        .render();\n    }\n\n    if (x2Exists) {\n      this._x2Test\n        .domain(x2Domain)\n        .height(height)\n        .range([undefined, xRangeMax])\n        .select(testGroup.node())\n        .ticks(x2Ticks)\n        .width(width)\n        .config(xC)\n        .tickSize(0)\n        .config(defaultX2Config)\n        .config(this._x2Config)\n        .scale(x2ConfigScale)\n        .render();\n    }\n\n    const xTestRange = this._xTest._getRange();\n    const x2TestRange = this._x2Test._getRange();\n\n    const x2Bounds = this._x2Test.outerBounds();\n    const x2Height = x2Exists ? x2Bounds.height + this._x2Test.padding() : 0;\n\n    let xOffsetLeft = max([yWidth, xTestRange[0], x2TestRange[0]]);\n\n    if (showX) {\n      this._xTest\n        .range([xOffsetLeft, undefined])\n        .render();\n    }\n\n    const topOffset = showY ? this._yTest.shapeConfig().labelConfig.fontSize() / 2 : 0;\n\n    let xOffsetRight = max([y2Width, width - xTestRange[1], width - x2TestRange[1]]);\n    const xBounds = this._xTest.outerBounds();\n    const xHeight = xBounds.height + (showY ? this._xTest.padding() : 0);\n\n    this._padding.left += xOffsetLeft;\n    this._padding.right += xOffsetRight;\n    this._padding.bottom += xHeight;\n    this._padding.top += x2Height + topOffset;\n\n    super._draw(callback);\n\n    const horizontalMargin = this._margin.left + this._margin.right;\n    const verticalMargin = this._margin.top + this._margin.bottom;\n    let yRange = [x2Height, height - (xHeight + topOffset + verticalMargin)];\n\n    if (showY) {\n      this._yTest\n        .domain(yDomain)\n        .height(height)\n        .maxSize(width / 2)\n        .range(yRange)\n        .select(testGroup.node())\n        .ticks(yTicks)\n        .width(width)\n        .config(yC)\n        .config(this._yConfig)\n        .scale(yConfigScale)\n        .render();\n    }\n\n    yBounds = this._yTest.outerBounds();\n    yWidth = yBounds.width ? yBounds.width + this._yTest.padding() : undefined;\n    xOffsetLeft = max([yWidth, xTestRange[0], x2TestRange[0]]);\n\n    if (y2Exists) {\n      this._y2Test\n        .config(yC)\n        .domain(y2Domain)\n        .gridSize(0)\n        .height(height)\n        .range(yRange)\n        .select(testGroup.node())\n        .width(width - max([0, xOffsetRight - y2Width]))\n        .title(false)\n        .config(this._y2Config)\n        .config(defaultY2Config)\n        .scale(y2ConfigScale)\n        .render();\n    }\n\n    y2Bounds = this._y2Test.outerBounds();\n    y2Width = y2Bounds.width ? y2Bounds.width + this._y2Test.padding() : undefined;\n    xOffsetRight = max([0, y2Width, width - xTestRange[1], width - x2TestRange[1]]);\n    const xRange = [xOffsetLeft, width - (xOffsetRight + horizontalMargin)];\n\n    const rectGroup = elem(\"g.d3plus-plot-background\", {parent, transition});\n\n    const transform = `translate(${this._margin.left}, ${this._margin.top + x2Height + topOffset})`;\n    const x2Transform = `translate(${this._margin.left}, ${this._margin.top + topOffset})`;\n\n    const xGroup = showX && elem(\"g.d3plus-plot-x-axis\", {parent, transition, enter: {transform}, update: {transform}});\n    const x2Group = x2Exists && elem(\"g.d3plus-plot-x2-axis\", {parent, transition, enter: {transform: x2Transform}, update: {transform: x2Transform}});\n\n    const xTrans = xOffsetLeft > yWidth ? xOffsetLeft - yWidth : 0;\n    const yTransform = `translate(${this._margin.left + xTrans}, ${this._margin.top + topOffset})`;\n    const yGroup = showY && elem(\"g.d3plus-plot-y-axis\", {parent, transition, enter: {transform: yTransform}, update: {transform: yTransform}});\n\n    const y2Transform = `translate(-${this._margin.right}, ${this._margin.top + topOffset})`;\n    const y2Group = y2Exists && elem(\"g.d3plus-plot-y2-axis\", {parent, transition, enter: {transform: y2Transform}, update: {transform: y2Transform}});\n\n    this._xAxis\n      .domain(xDomain)\n      .height(height - (x2Height + topOffset + verticalMargin))\n      .maxSize(height / 2)\n      .range(xRange)\n      .select(showX ? xGroup.node() : undefined)\n      .ticks(xTicks)\n      .width(width)\n      .config(xC)\n      .config(this._xConfig)\n      .scale(xConfigScale)\n      .render();\n\n    if (x2Exists) {\n      this._x2Axis\n        .domain(x2Domain)\n        .height(height - (xHeight + topOffset + verticalMargin))\n        .range(xRange)\n        .select(x2Group.node())\n        .ticks(x2Ticks)\n        .width(width)\n        .config(xC)\n        .config(defaultX2Config)\n        .config(this._x2Config)\n        .scale(x2ConfigScale)\n        .render();\n    }\n\n    this._xFunc = x = (d, x) => {\n      if (x === \"x2\") {\n        if (x2ConfigScale === \"log\" && d === 0) d = x2Domain[0] < 0 ? this._x2Axis._d3Scale.domain()[1] : this._x2Axis._d3Scale.domain()[0];\n        return this._x2Axis._getPosition.bind(this._x2Axis)(d);\n      }\n      else {\n        if (xConfigScale === \"log\" && d === 0) d = xDomain[0] < 0 ? this._xAxis._d3Scale.domain()[1] : this._xAxis._d3Scale.domain()[0];\n        return this._xAxis._getPosition.bind(this._xAxis)(d);\n      }\n    };\n\n    yRange = [this._xAxis.outerBounds().y + x2Height, height - (xHeight + topOffset + verticalMargin)];\n\n    this._yAxis\n      .domain(yDomain)\n      .height(height)\n      .maxSize(width / 2)\n      .range(yRange)\n      .select(showY ? yGroup.node() : undefined)\n      .ticks(yTicks)\n      .width(xRange[xRange.length - 1])\n      .config(yC)\n      .config(this._yConfig)\n      .scale(yConfigScale)\n      .render();\n\n    if (y2Exists) {\n      this._y2Axis\n        .config(yC)\n        .domain(y2Exists ? y2Domain : yDomain)\n        .gridSize(0)\n        .height(height)\n        .range(yRange)\n        .select(y2Group.node())\n        .width(width - max([0, xOffsetRight - y2Width]))\n        .title(false)\n        .config(this._y2Config)\n        .config(defaultY2Config)\n        .scale(y2ConfigScale)\n        .render();\n    }\n\n    this._yFunc = y = (d, y) => {\n      if (y === \"y2\") {\n        if (y2ConfigScale === \"log\" && d === 0) d = y2Domain[1] < 0 ? this._y2Axis._d3ScaleNegative.domain()[0] : this._y2Axis._d3Scale.domain()[1];\n        return this._y2Axis._getPosition.bind(this._y2Axis)(d) - x2Height;\n      }\n      else {\n        if (yConfigScale === \"log\" && d === 0) d = yDomain[1] < 0 ? this._yAxis._d3ScaleNegative.domain()[0] : this._yAxis._d3Scale.domain()[1];\n        return this._yAxis._getPosition.bind(this._yAxis)(d) - x2Height;\n      }\n    };\n\n    new shapes.Rect()\n      .data([{}])\n      .select(rectGroup.node())\n      .x(xRange[0] + (xRange[1] - xRange[0]) / 2)\n      .width(xRange[1] - xRange[0])\n      .y(this._margin.top + topOffset + yRange[0] + (yRange[1] - yRange[0]) / 2)\n      .height(yRange[1] - yRange[0])\n      .config(this._backgroundConfig)\n      .render();\n\n    const annotationGroup = elem(\"g.d3plus-plot-annotations\", {parent, transition, enter: {transform}, update: {transform}}).node();\n    this._annotations.forEach(annotation => {\n      new shapes[annotation.shape]()\n        .config(annotation)\n        .config({\n          x: d => d.x2 ? x(d.x2, \"x2\") : x(d.x),\n          x0: this._discrete === \"x\" ? d => d.x2 ? x(d.x2, \"x2\") : x(d.x) : x(domains.x[0]),\n          x1: this._discrete === \"x\" ? null : d => d.x2 ? x(d.x2, \"x2\") : x(d.x),\n          y: d => d.y2 ? y(d.y2, \"y2\") : y(d.y),\n          y0: this._discrete === \"y\" ? d => d.y2 ? y(d.y2, \"y2\") : y(d.y) : y(domains.y[1]) - yOffset,\n          y1: this._discrete === \"y\" ? null : d => d.y2 ? y(d.y2, \"y2\") : y(d.y) - yOffset\n        })\n        .select(annotationGroup)\n        .render();\n    });\n\n    let yOffset = this._xAxis.barConfig()[\"stroke-width\"];\n    if (yOffset) yOffset /= 2;\n\n    const discrete = this._discrete || \"x\";\n\n    const shapeConfig = {\n      discrete: this._discrete,\n      duration: this._duration,\n      label: d => this._drawLabel(d.data, d.i),\n      select: elem(\"g.d3plus-plot-shapes\", {parent, transition, enter: {transform}, update: {transform}}).node(),\n      x: d => d.x2 !== undefined ? x(d.x2, \"x2\") : x(d.x),\n      x0: discrete === \"x\" ? d => d.x2 ? x(d.x2, \"x2\") : x(d.x) : x(typeof this._baseline === \"number\" ? this._baseline : domains.x[0]),\n      x1: discrete === \"x\" ? null : d => d.x2 ? x(d.x2, \"x2\") : x(d.x),\n      y: d => d.y2 !== undefined ? y(d.y2, \"y2\") : y(d.y),\n      y0: discrete === \"y\" ? d => d.y2 ? y(d.y2, \"y2\") : y(d.y) : y(typeof this._baseline === \"number\" ? this._baseline : domains.y[1]) - yOffset,\n      y1: discrete === \"y\" ? null : d => d.y2 ? y(d.y2, \"y2\") : y(d.y) - yOffset\n    };\n\n    if (this._stacked) {\n      const scale = opp === \"x\" ? x : y;\n      shapeConfig[`${opp}`] = shapeConfig[`${opp}0`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][0]) : scale(domains[opp][opp === \"x\" ? 0 : 1]);\n      };\n      shapeConfig[`${opp}1`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][1]) : scale(domains[opp][opp === \"x\" ? 0 : 1]);\n      };\n    }\n\n    const events = Object.keys(this._on);\n    shapeData.forEach(d => {\n\n      const s = new shapes[d.key]().config(shapeConfig).data(d.values);\n\n      if (d.key === \"Bar\") {\n\n        let space;\n        const scale = this._discrete === \"x\" ? x : y;\n        const scaleType = this._discrete === \"x\" ? xScale : yScale;\n        const vals = this._discrete === \"x\" ? xDomain : yDomain;\n        const range = this._discrete === \"x\" ? xRange : yRange;\n        if (scaleType !== \"Point\" && vals.length === 2) {\n          space = (scale(d.values[this._discrete === \"x\" ? 0 : d.values.length - 1][this._discrete]) - scale(vals[0])) * 2;\n        }\n        else if (vals.length > 1) space = scale(vals[1]) - scale(vals[0]);\n        else space = range[range.length - 1] - range[0];\n        if (this._groupPadding < space) space -= this._groupPadding;\n\n        let barSize = space || 1;\n\n        const groups = nest()\n          .key(d => d[this._discrete])\n          .key(d => d.group)\n          .entries(d.values);\n\n        const ids = merge(groups.map(d => d.values.map(v => v.key)));\n        const uniqueIds = Array.from(new Set(ids));\n\n        if (max(groups.map(d => d.values.length)) === 1) {\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i));\n        }\n        else {\n\n          barSize = (barSize - this._barPadding * uniqueIds.length - 1) / uniqueIds.length;\n\n          const offset = space / 2 - barSize / 2;\n\n          const xMod = scales.scaleLinear()\n            .domain([0, uniqueIds.length - 1])\n            .range([-offset, offset]);\n\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i) + xMod(uniqueIds.indexOf(d.group)));\n\n        }\n\n        s.width(barSize);\n        s.height(barSize);\n\n      }\n      else if (d.key === \"Line\") {\n\n        s.duration(width * 1.5);\n\n        if (this._confidence) {\n          const areaConfig = Object.assign({}, shapeConfig);\n          const discrete = this._discrete || \"x\";\n          const key = discrete === \"x\" ? \"y\" : \"x\";\n          const scaleFunction = discrete === \"x\" ? y : x;\n          areaConfig[`${key}0`] = d => scaleFunction(this._confidence[0] ? d.lci : d[key]);\n          areaConfig[`${key}1`] = d => scaleFunction(this._confidence[1] ? d.hci : d[key]);\n\n          const area = new shapes.Area().config(areaConfig).data(d.values);\n          const confidenceConfig = Object.assign(this._shapeConfig, this._confidenceConfig);\n\n          area\n            .config(assign(configPrep.bind(this)(confidenceConfig, \"shape\", \"Line\"), configPrep.bind(this)(confidenceConfig, \"shape\", \"Area\")))\n            .render();\n\n          this._shapes.push(area);\n        }\n\n        s.config({\n          discrete: shapeConfig.discrete || \"x\",\n          label: this._lineLabels ? this._drawLabel : false,\n          labelBounds: this._lineLabels ? (d, i, s) => {\n            const [firstX, firstY] = s.points[0];\n            const [lastX, lastY] = s.points[s.points.length - 1];\n            const height = this._height / 4;\n            return {\n              x: lastX - firstX,\n              y: lastY - firstY - height / 2,\n              width: largestLabel,\n              height\n            };\n          } : false\n        });\n\n      }\n\n      const classEvents = events.filter(e => e.includes(`.${d.key}`)),\n            globalEvents = events.filter(e => !e.includes(\".\")),\n            shapeEvents = events.filter(e => e.includes(\".shape\"));\n      for (let e = 0; e < globalEvents.length; e++) s.on(globalEvents[e], (d, i, x, event) => this._on[globalEvents[e]](d.data, d.i, x, event));\n      for (let e = 0; e < shapeEvents.length; e++) s.on(shapeEvents[e], (d, i, x, event) => this._on[shapeEvents[e]](d.data, d.i, x, event));\n      for (let e = 0; e < classEvents.length; e++) s.on(classEvents[e], (d, i, x, event) => this._on[classEvents[e]](d.data, d.i, x, event));\n\n      const userConfig = configPrep.bind(this)(this._shapeConfig, \"shape\", d.key);\n      if (this._shapeConfig.duration === undefined) delete userConfig.duration;\n      s.config(userConfig).render();\n\n      this._shapes.push(s);\n\n      if (d.key === \"Line\" && this._lineMarkers) {\n        const markers = new shapes.Circle()\n          .data(d.values)\n          .config(shapeConfig)\n          .config(this._lineMarkerConfig)\n          .id(d => `${d.id}_${d.discrete}`);\n\n        for (let e = 0; e < globalEvents.length; e++) markers.on(globalEvents[e], (d, i, x, event) => this._on[globalEvents[e]](d.data, d.i, x, event));\n        for (let e = 0; e < shapeEvents.length; e++) markers.on(shapeEvents[e], (d, i, x, event) => this._on[shapeEvents[e]](d.data, d.i, x, event));\n        for (let e = 0; e < classEvents.length; e++) markers.on(classEvents[e], (d, i, x, event) => this._on[classEvents[e]](d.data, d.i, x, event));\n\n        markers.render();\n        this._shapes.push(markers);\n      }\n\n    });\n\n    const dataShapes = shapeData.map(d => d.key);\n    if (dataShapes.includes(\"Line\")) {\n      if (this._confidence) dataShapes.push(\"Area\");\n      if (this._labelMarkers) dataShapes.push(\"Circle\");\n    }\n    const exitShapes = this._previousShapes.filter(d => !dataShapes.includes(d));\n\n    exitShapes.forEach(shape => {\n      new shapes[shape]()\n        .config(shapeConfig)\n        .data([])\n        .render();\n    });\n\n    this._previousShapes = dataShapes;\n\n    return this;\n\n  }\n\n  /**\n      @memberof Plot\n      @desc Allows drawing custom shapes to be used as annotations in the provided x/y plot. This method accepts custom config objects for the [Shape](http://d3plus.org/docs/#Shape) class, either a single config object or an array of config objects. Each config object requires an additional parameter, the \"shape\", which denotes which [Shape](http://d3plus.org/docs/#Shape) sub-class to use ([Rect](http://d3plus.org/docs/#Rect), [Line](http://d3plus.org/docs/#Line), etc). Annotations will be drawn underneath the data to be displayed.\n      @param {Array|Object} *annotations* = []\n      @chainable\n  */\n  annotations(_) {\n    return arguments.length ? (this._annotations = _ instanceof Array ? _ : [_], this) : this._annotations;\n  }\n\n  /**\n       @memberof Plot\n       @desc A d3plus-shape configuration Object used for styling the background rectangle of the inner x/y plot (behind all of the shapes and gridlines).\n       @param {Object} [*value*]\n       @chainable\n   */\n  backgroundConfig(_) {\n    return arguments.length ? (this._backgroundConfig = assign(this._backgroundConfig, _), this) : this._backgroundConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between each bar in a group of bars.\n      @param {Number} *value* = 0\n      @chainable\n  */\n  barPadding(_) {\n    return arguments.length ? (this._barPadding = _, this) : this._barPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the baseline for the x/y plot. If *value* is not specified, returns the current baseline.\n      @param {Number} *value*\n      @chainable\n  */\n  baseline(_) {\n    return arguments.length ? (this._baseline = _, this) : this._baseline;\n  }\n\n  /**\n       @memberof Plot\n       @desc Sets the confidence to the specified array of lower and upper bounds.\n       @param {String[]|Function[]} *value*\n       @chainable\n       @example <caption>Can be called with accessor functions or static keys:</caption>\n       var data = {id: \"alpha\", value: 10, lci: 9, hci: 11};\n       ...\n       // Accessor functions\n       .confidence([function(d) { return d.lci }, function(d) { return d.hci }])\n\n       // Or static keys\n       .confidence([\"lci\", \"hci\"])\n   */\n  confidence(_) {\n    if (arguments.length && _ instanceof Array) {\n      this._confidence = [];\n      const lower = _[0];\n      this._confidence[0] = typeof lower === \"function\" || !lower ? lower : accessor(lower);\n      const upper = _[1];\n      this._confidence[1] = typeof upper === \"function\" || !upper ? upper : accessor(upper);\n\n      return this;\n    }\n    else return this._confidence;\n  }\n\n  /**\n       @memberof Plot\n       @desc If *value* is specified, sets the config method for each shape rendered as a confidence interval and returns the current class instance.\n       @param {Object} [*value*]\n       @chainable\n   */\n  confidenceConfig(_) {\n    return arguments.length ? (this._confidenceConfig = assign(this._confidenceConfig, _), this) : this._confidenceConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the discrete axis to the specified string. If *value* is not specified, returns the current discrete axis.\n      @param {String} *value*\n      @chainable\n  */\n  discrete(_) {\n    return arguments.length ? (this._discrete = _, this) : this._discrete;\n  }\n\n  /**\n      @memberof Plot\n      @desc When the width or height of the chart is less than or equal to this pixel value, the discrete axis will not be shown. This helps produce slick sparklines. Set this value to `0` to disable the behavior entirely.\n      @param {Number} *value*\n      @chainable\n  */\n  discreteCutoff(_) {\n    return arguments.length ? (this._discreteCutoff = _, this) : this._discreteCutoff;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between groups of bars.\n      @param {Number} [*value* = 5]\n      @chainable\n  */\n  groupPadding(_) {\n    return arguments.length ? (this._groupPadding = _, this) : this._groupPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Draws labels on the right side of any Line shapes that are drawn on the plot.\n      @param {Boolean} [*value* = false]\n      @chainable\n  */\n  lineLabels(_) {\n    return arguments.length ? (this._lineLabels = _, this) : this._lineLabels;\n  }\n\n  /**\n      @memberof Plot\n      @desc Shape config for the Circle shapes drawn by the lineMarkers method.\n      @param {Object} *value*\n      @chainable\n  */\n  lineMarkerConfig(_) {\n    return arguments.length ? (this._lineMarkerConfig = assign(this._lineMarkerConfig, _), this) : this._lineMarkerConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Draws circle markers on each vertex of a Line.\n      @param {Boolean} [*value* = false]\n      @chainable\n  */\n  lineMarkers(_) {\n    return arguments.length ? (this._lineMarkers = _, this) : this._lineMarkers;\n  }\n\n  /**\n      @memberof Plot\n      @desc A JavaScript [sort comparator function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort) that receives each shape Class (ie. \"Circle\", \"Line\", etc) as it's comparator arguments. Shapes are drawn in groups based on their type, so you are defining the layering order for all shapes of said type.\n      @param {Function} *value*\n      @chainable\n  */\n  shapeSort(_) {\n    return arguments.length ? (this._shapeSort = _, this) : this._shapeSort;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size of bubbles to the given Number, data key, or function.\n      @param {Function|Number|String} *value* = 10\n      @chainable\n  */\n  size(_) {\n    return arguments.length ? (this._size = typeof _ === \"function\" || !_ ? _ : accessor(_), this) : this._size;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale maximum to the specified number.\n      @param {Number} *value* = 20\n      @chainable\n  */\n  sizeMax(_) {\n    return arguments.length ? (this._sizeMax = _, this) : this._sizeMax;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale minimum to the specified number.\n      @param {Number} *value* = 5\n      @chainable\n  */\n  sizeMin(_) {\n    return arguments.length ? (this._sizeMin = _, this) : this._sizeMin;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale to the specified string.\n      @param {String} *value* = \"sqrt\"\n      @chainable\n  */\n  sizeScale(_) {\n    return arguments.length ? (this._sizeScale = _, this) : this._sizeScale;\n  }\n\n  /**\n      @memberof Plot\n      @desc If *value* is specified, toggles shape stacking. If *value* is not specified, returns the current stack value.\n      @param {Boolean} *value* = false\n      @chainable\n  */\n  stacked(_) {\n    return arguments.length ? (this._stacked = _, this) : this._stacked;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack offset. If *value* is not specified, returns the current stack offset function.\n      @param {Function|String} *value* = \"descending\"\n      @chainable\n  */\n  stackOffset(_) {\n    return arguments.length ? (this._stackOffset = typeof _ === \"function\" ? _ : d3Shape[`stackOffset${_.charAt(0).toUpperCase() + _.slice(1)}`], this) : this._stackOffset;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack order. If *value* is not specified, returns the current stack order function.\n      @param {Function|String|Array} *value* = \"none\"\n      @chainable\n  */\n  stackOrder(_) {\n    if (arguments.length) {\n      if (typeof _ === \"string\") this._stackOrder = _ === \"ascending\" ? stackOrderAscending : _ === \"descending\" ? stackOrderDescending : d3Shape[`stackOrder${_.charAt(0).toUpperCase() + _.slice(1)}`];\n      else this._stackOrder = _;\n      return this;\n    }\n    else return this._stackOrder;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x accessor to the specified function or number. If *value* is not specified, returns the current x accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  x(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._x = _;\n      else {\n        this._x = accessor(_);\n        this._xKey = _;\n      }\n      return this;\n    }\n    else return this._x;\n  }\n\n  /**\n       @memberof Plot\n       @desc Sets the x2 accessor to the specified function or number. If *value* is not specified, returns the current x2 accessor.\n       @param {Function|Number} *value*\n       @chainable\n   */\n  x2(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._x2 = _;\n      else {\n        this._x2 = accessor(_);\n        this._x2Key = _;\n      }\n      return this;\n    }\n    else return this._x2;\n  }\n\n  /**\n      @memberof Plot\n      @desc A pass-through to the underlying [Axis](http://d3plus.org/docs/#Axis) config used for the x-axis. Includes additional functionality where passing \"auto\" as the value for the [scale](http://d3plus.org/docs/#Axis.scale) method will determine if the scale should be \"linear\" or \"log\" based on the provided data.\n      @param {Object} *value*\n      @chainable\n  */\n  xConfig(_) {\n    return arguments.length ? (this._xConfig = assign(this._xConfig, _), this) : this._xConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc When the width of the chart is less than or equal to this pixel value, and the x-axis is not the discrete axis, it will not be shown. This helps produce slick sparklines. Set this value to `0` to disable the behavior entirely.\n      @param {Number} *value*\n      @chainable\n  */\n  xCutoff(_) {\n    return arguments.length ? (this._xCutoff = _, this) : this._xCutoff;\n  }\n\n  /**\n      @memberof Plot\n      @desc A pass-through to the underlying [Axis](http://d3plus.org/docs/#Axis) config used for the secondary x-axis. Includes additional functionality where passing \"auto\" as the value for the [scale](http://d3plus.org/docs/#Axis.scale) method will determine if the scale should be \"linear\" or \"log\" based on the provided data.\n      @param {Object} *value*\n      @chainable\n  */\n  x2Config(_) {\n    return arguments.length ? (this._x2Config = assign(this._x2Config, _), this) : this._x2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x domain to the specified array. If *value* is not specified, returns the current x domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  xDomain(_) {\n    return arguments.length ? (this._xDomain = _, this) : this._xDomain;\n  }\n\n  /**\n       @memberof Plot\n       @desc Sets the x2 domain to the specified array. If *value* is not specified, returns the current x2 domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n       @param {Array} *value*\n       @chainable\n   */\n  x2Domain(_) {\n    return arguments.length ? (this._x2Domain = _, this) : this._x2Domain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete x axes.\n      @param {Function} *value*\n      @chainable\n  */\n  xSort(_) {\n    return arguments.length ? (this._xSort = _, this) : this._xSort;\n  }\n\n  /**\n       @memberof Plot\n       @desc Defines a custom sorting comparitor function to be used for discrete x2 axes.\n       @param {Function} *value*\n       @chainable\n   */\n  x2Sort(_) {\n    return arguments.length ? (this._x2Sort = _, this) : this._x2Sort;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y accessor to the specified function or number. If *value* is not specified, returns the current y accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  y(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._y = _;\n      else {\n        this._y = accessor(_);\n        this._yKey = _;\n      }\n      return this;\n    }\n    else return this._y;\n  }\n\n  /**\n       @memberof Plot\n       @desc Sets the y2 accessor to the specified function or number. If *value* is not specified, returns the current y2 accessor.\n       @param {Function|Number} *value*\n       @chainable\n   */\n  y2(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._y2 = _;\n      else {\n        this._y2 = accessor(_);\n        this._y2Key = _;\n      }\n      return this;\n    }\n    else return this._y2;\n  }\n\n  /**\n      @memberof Plot\n      @desc A pass-through to the underlying [Axis](http://d3plus.org/docs/#Axis) config used for the y-axis. Includes additional functionality where passing \"auto\" as the value for the [scale](http://d3plus.org/docs/#Axis.scale) method will determine if the scale should be \"linear\" or \"log\" based on the provided data.\n\n*Note:* If a \"domain\" array is passed to the y-axis config, it will be reversed.\n      @param {Object} *value*\n      @chainable\n  */\n  yConfig(_) {\n    if (arguments.length) {\n      if (_.domain) _.domain = _.domain.slice().reverse();\n      this._yConfig = assign(this._yConfig, _);\n      return this;\n    }\n    return this._yConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc When the height of the chart is less than or equal to this pixel value, and the y-axis is not the discrete axis, it will not be shown. This helps produce slick sparklines. Set this value to `0` to disable the behavior entirely.\n      @param {Number} *value*\n      @chainable\n  */\n  yCutoff(_) {\n    return arguments.length ? (this._yCutoff = _, this) : this._yCutoff;\n  }\n\n  /**\n      @memberof Plot\n      @desc A pass-through to the underlying [Axis](http://d3plus.org/docs/#Axis) config used for the secondary y-axis. Includes additional functionality where passing \"auto\" as the value for the [scale](http://d3plus.org/docs/#Axis.scale) method will determine if the scale should be \"linear\" or \"log\" based on the provided data.\n      @param {Object} *value*\n      @chainable\n  */\n  y2Config(_) {\n    if (arguments.length) {\n      if (_.domain) _.domain = _.domain.slice().reverse();\n      this._y2Config = assign(this._y2Config, _);\n      return this;\n    }\n    return this._y2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y domain to the specified array. If *value* is not specified, returns the current y domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  yDomain(_) {\n    return arguments.length ? (this._yDomain = _, this) : this._yDomain;\n  }\n\n  /**\n       @memberof Plot\n       @desc Sets the y2 domain to the specified array. If *value* is not specified, returns the current y2 domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n       @param {Array} *value*\n       @chainable\n   */\n  y2Domain(_) {\n    return arguments.length ? (this._y2Domain = _, this) : this._y2Domain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete y axes.\n      @param {Function} *value*\n      @chainable\n  */\n  ySort(_) {\n    return arguments.length ? (this._ySort = _, this) : this._ySort;\n  }\n\n  /**\n       @memberof Plot\n       @desc Defines a custom sorting comparitor function to be used for discrete y2 axes.\n       @param {Function} *value*\n       @chainable\n   */\n  y2Sort(_) {\n    return arguments.length ? (this._y2Sort = _, this) : this._y2Sort;\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class AreaPlot\n    @extends Plot\n    @desc Creates an area plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .baseline(0)\n  .discrete(\"x\")\n  .shape(\"Area\")\n*/\nexport default class AreaPlot extends Plot {\n\n  /**\n      @memberof AreaPlot\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._baseline = 0;\n    this._discrete = \"x\";\n    this._shape = constant(\"Area\");\n    this.x(\"x\");\n\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class BarChart\n    @extends Plot\n    @desc Creates a bar chart based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .baseline(0)\n  .discrete(\"x\")\n  .shape(\"Bar\")\n*/\nexport default class BarChart extends Plot {\n\n  /**\n      @memberof BarChart\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._baseline = 0;\n    this._discrete = \"x\";\n    const defaultLegend = this._legend;\n    this._legend = (config, arr) => {\n      const legendIds = arr.map(this._groupBy[this._legendDepth].bind(this)).sort().join();\n      const barIds = this._filteredData.map(this._groupBy[this._legendDepth].bind(this)).sort().join();\n      if (legendIds === barIds) return false;\n      return defaultLegend.bind(this)(config, arr);\n    };\n    this._shape = constant(\"Bar\");\n    this.x(\"x\");\n\n  }\n\n}\n","import {assign, constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class BoxWhisker\n    @extends Plot\n    @desc Creates a simple box and whisker based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Box\")\n*/\nexport default class BoxWhisker extends Plot {\n\n  /**\n      @memberof BoxWhisker\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._discrete = \"x\";\n    this._shape = constant(\"Box\");\n    this.x(\"x\");\n\n    this._tooltipConfig = assign(this._tooltipConfig, {\n      title: (d, i) => {\n        if (!d) return \"\";\n        while (d.__d3plus__ && d.data) {\n          d = d.data;\n          i = d.i;\n        }\n        if (this._label) return this._label(d, i);\n        const l = this._ids(d, i).slice(0, this._drawDepth);\n        return l[l.length - 1];\n      }\n    });\n\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class BumpChart\n    @extends Plot\n    @desc Creates a bump chart based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Line\")\n  .x(\"x\")\n  .y2(d => this._y(d))\n  .yConfig({\n    tickFormat: val => {\n      const data = this._formattedData;\n      const xDomain = this._xDomain;\n      const startData = data.filter(d => d.x === xDomain[0]);\n      const d = startData.find(d => d.y === val);\n      return this._drawLabel(d, d.i);\n     }\n   })\n  .y2Config({\n    tickFormat: val => {\n      const data = this._formattedData;\n      const xDomain = this._xDomain;\n      const endData = data.filter(d => d.x === xDomain[xDomain.length - 1]);\n      const d = endData.find(d => d.y === val);\n      return this._drawLabel(d, d.i);\n     }\n   })\n  .ySort((a, b) => b.y - a.y)\n  .y2Sort((a, b) => b.y - a.y)\n*/\nexport default class BumpChart extends Plot {\n\n  /**\n      @memberof BumpChart\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._discrete = \"x\";\n    this._shape = constant(\"Line\");\n    this.x(\"x\");\n    this.y2(d => this._y(d));\n\n    this.yConfig({\n      tickFormat: val => {\n        const data = this._formattedData;\n        const xMin = data[0].x instanceof Date ? data[0].x.getTime() : data[0].x;\n        const startData = data.filter(d => (d.x instanceof Date ? d.x.getTime() : d.x) === xMin);\n        const d = startData.find(d => d.y === val);\n        return d ? this._drawLabel(d, d.i) : \"\";\n      }\n    });\n    this.y2Config({\n      tickFormat: val => {\n        const data = this._formattedData;\n        const xMax = data[data.length - 1].x instanceof Date ? data[data.length - 1].x.getTime() : data[data.length - 1].x;\n        const endData = data.filter(d => (d.x instanceof Date ? d.x.getTime() : d.x) === xMax);\n        const d = endData.find(d => d.y === val);\n        return d ? this._drawLabel(d, d.i) : \"\";\n      }\n    });\n    this.ySort((a, b) => this._y(b) - this._y(a));\n    this.y2Sort((a, b) => this._y(b) - this._y(a));\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class LinePlot\n    @extends Plot\n    @desc Creates a line plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Line\")\n*/\nexport default class LinePlot extends Plot {\n\n  /**\n      @memberof LinePlot\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._discrete = \"x\";\n    this._shape = constant(\"Line\");\n    this.x(\"x\");\n\n  }\n\n}\n","/**\n    @external Viz\n    @see https://github.com/d3plus/d3plus-viz#Viz\n*/\n\nimport {min, max, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport {pointer} from \"d3-selection\";\nimport {accessor, assign, configPrep, constant, elem, merge} from \"d3plus-common\";\nimport {Circle, Path, Rect} from \"d3plus-shape\";\nimport {Viz} from \"d3plus-viz\";\n\nconst tau = Math.PI * 2;\n\n/**\n    @class Radar\n    @extends Viz\n    @desc Creates a radar visualization based on an array of data.\n*/\nexport default class Radar extends Viz {\n\n  /**\n      @memberof Radar\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Viz.\n      @private\n  */\n  constructor() {\n    super();\n\n    this._axisConfig = {\n      shapeConfig: {\n        fill: constant(\"none\"),\n        labelConfig: {\n          fontColor: \"#999\",\n          padding: 0,\n          textAnchor: (d, i, x) => x.textAnchor,\n          verticalAlign: \"middle\"\n        },\n        stroke: \"#eee\",\n        strokeWidth: constant(1)\n      }\n    };\n    this._discrete = \"metric\";\n    this._levels = 6;\n    this._metric = accessor(\"metric\");\n    this._outerPadding = 100;\n    this._shape = constant(\"Path\");\n    this._value = accessor(\"value\");\n  }\n\n  /**\n      Extends the draw behavior of the abstract Viz class.\n      @private\n  */\n  _draw(callback) {\n    super._draw(callback);\n    const height = this._height - this._margin.top - this._margin.bottom,\n          width = this._width - this._margin.left - this._margin.right;\n\n    const radius = min([height, width]) / 2 - this._outerPadding,\n          transform = `translate(${width / 2}, ${height / 2})`;\n\n    const nestedAxisData = nest()\n        .key(this._metric)\n        .entries(this._filteredData),\n          nestedGroupData = nest()\n        .key(this._id)\n        .key(this._metric)\n        .entries(this._filteredData);\n\n    const maxValue = max(nestedGroupData.map(h => h.values.map(d => sum(d.values, (x, i) => this._value(x, i)))).flat());\n\n    const circularAxis = Array.from(Array(this._levels).keys()).map(d => ({\n      id: d,\n      r: radius * ((d + 1) / this._levels)\n    }));\n\n    const circleConfig = configPrep.bind(this)(this._axisConfig.shapeConfig, \"shape\", \"Circle\");\n    delete circleConfig.label;\n\n    new Circle()\n      .data(circularAxis)\n      .select(\n        elem(\"g.d3plus-Radar-radial-circles\", {\n          parent: this._select,\n          enter: {transform},\n          update: {transform}\n        }).node()\n      )\n      .config(circleConfig)\n      .render();\n\n    const totalAxis = nestedAxisData.length;\n    const polarAxis = nestedAxisData\n      .map((d, i) => {\n        const width = this._outerPadding;\n        const fontSize =\n          this._shapeConfig.labelConfig.fontSize &&\n            this._shapeConfig.labelConfig.fontSize(d, i) ||\n          11;\n\n        const lineHeight = fontSize * 1.4;\n        const height = lineHeight * 2;\n        const padding = 10,\n              quadrant = parseInt(360 - 360 / totalAxis * i / 90, 10) % 4 + 1,\n              radians = tau / totalAxis * i;\n\n        let angle = 360 / totalAxis * i;\n\n        let textAnchor = \"start\";\n        let x = padding;\n\n        if (quadrant === 2 || quadrant === 3) {\n          x = -width - padding;\n          textAnchor = \"end\";\n          angle += 180;\n        }\n\n        const labelBounds = {\n          x,\n          y: -height / 2,\n          width,\n          height\n        };\n\n        return {\n          __d3plus__: true,\n          data: merge(d.values, this._aggs),\n          i,\n          id: d.key,\n          angle,\n          textAnchor,\n          labelBounds,\n          rotateAnchor: [-x, height / 2],\n          x: radius * Math.cos(radians),\n          y: radius * Math.sin(radians)\n        };\n      })\n      .sort((a, b) => a.key - b.key);\n\n    new Rect()\n      .data(polarAxis)\n      .rotate(d => d.angle || 0)\n      .width(0)\n      .height(0)\n      .x(d => d.x)\n      .y(d => d.y)\n      .label(d => d.id)\n      .labelBounds(d => d.labelBounds)\n      .labelConfig(this._axisConfig.shapeConfig.labelConfig)\n      .select(\n        elem(\"g.d3plus-Radar-text\", {\n          parent: this._select,\n          enter: {transform},\n          update: {transform}\n        }).node()\n      )\n      .render();\n\n    new Path()\n      .data(polarAxis)\n      .d(d => `M${0},${0} ${-d.x},${-d.y}`)\n      .select(\n        elem(\"g.d3plus-Radar-axis\", {\n          parent: this._select,\n          enter: {transform},\n          update: {transform}\n        }).node()\n      )\n      .config(configPrep.bind(this)(this._axisConfig.shapeConfig, \"shape\", \"Path\"))\n      .render();\n\n    const groupData = nestedGroupData.map(h => {\n\n      const q = h.values.map((d, i) => {\n        const value = sum(d.values, (x, i) => this._value(x, i));\n        const r = value / maxValue * radius,\n              radians = tau / totalAxis * i;\n        return {\n          x: r * Math.cos(radians),\n          y: r * Math.sin(radians)\n        };\n      });\n\n      const d = `M ${q[0].x} ${q[0].y} ${q\n        .map(l => `L ${l.x} ${l.y}`)\n        .join(\" \")} L ${q[0].x} ${q[0].y}`;\n\n      return {\n        arr: h.values.map(d => merge(d.values, this._aggs)),\n        id: h.key,\n        points: q,\n        d,\n        __d3plus__: true,\n        data: merge(h.values.map(d => merge(d.values, this._aggs)), this._aggs)\n      };\n\n    });\n\n    const pathConfig = configPrep.bind(this)(this._shapeConfig, \"shape\", \"Path\");\n    const events = Object.keys(pathConfig.on);\n    pathConfig.on = {};\n    for (let e = 0; e < events.length; e++) {\n      const event = events[e];\n      pathConfig.on[event] = (d, i, s, e) => {\n        const x = d.points.map(p => p.x + width / 2);\n        const y = d.points.map(p => p.y + height / 2);\n        const cursor = pointer(e, this._select.node());\n        const xDist = x.map(p => Math.abs(p - cursor[0]));\n        const yDist = y.map(p => Math.abs(p - cursor[1]));\n        const dists = xDist.map((d, i) => d + yDist[i]);\n        this._on[event].bind(this)(d.arr[dists.indexOf(min(dists))], i, s, e);\n      };\n    }\n\n    this._shapes.push(\n      new Path()\n        .data(groupData)\n        .d(d => d.d)\n        .select(\n          elem(\"g.d3plus-Radar-items\", {\n            parent: this._select,\n            enter: {transform},\n            update: {transform}\n          }).node()\n        )\n        .config(pathConfig)\n        .render()\n    );\n\n    return this;\n  }\n\n  /**\n      @memberof Radar\n      @desc Sets the config method used for the radial spokes, circles, and labels.\n      @param {Object} *value*\n      @chainable\n  */\n  axisConfig(_) {\n    return arguments.length ? (this._axisConfig = assign(this._axisConfig, _), this) : this._axisConfig;\n  }\n\n  /**\n      @memberof Radar\n      @desc Defines the value used as axis. If *value* is specified, sets the accessor to the specified metric function. If *value* is not specified, returns the current metric accessor.\n      @param {Function|String} *value*\n      @chainable\n  */\n  metric(_) {\n    return arguments.length ? (this._metric = typeof _ === \"function\" ? _ : accessor(_), this) : this._metric;\n  }\n\n  /**\n      @memberof Radar\n      @desc Determines how much pixel spaces to give the outer labels.\n      @param {Number} [*value* = 100]\n      @chainable\n  */\n  outerPadding(_) {\n    return arguments.length ? (this._outerPadding = _, this) : this._outerPadding;\n  }\n\n  /**\n      @memberof Radar\n      @desc If *value* is specified, sets the value accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current value accessor.\n      @param {Function|String} *value*\n      @example\nfunction value(d) {\n  return d.value;\n}\n  */\n  value(_) {\n    return arguments.length ? (this._value = typeof _ === \"function\" ? _ : accessor(_), this) : this._value;\n  }\n\n}\n","import {default as AreaPlot} from \"./AreaPlot\";\n\n/**\n    @class StackedArea\n    @extends Area\n    @desc Creates a stacked area plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.AreaPlot()\n  .stacked(true)\n*/\nexport default class StackedArea extends AreaPlot {\n\n  /**\n      @memberof StackedArea\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._stacked = true;\n\n  }\n\n}\n"],"names":["scale","data","discrete","padding","closest","map","d","reduce","acc","curr","i","arr","prev","domain","slice","reverse","Date","x","y","x2","y2","buffer","xKey","yKey","oppScale","_discrete","oppDomain","isDiscreteX","negVals","posVals","_stacked","groupedData","nest","key","group","entries","values","sum","filter","bMax","max","invert","bMin","min","discreteBuffer","floor10","v","Math","pow","floor","log10","abs","ceil10","ceil","axis","value","size","range","index","isNaN","mod","parseFloat","toPrecision","replace","logMod","log","needsBuffer","tempAxis","copy","diverging","r","percentScale","scaleLog","leftPercentage","zero","outside","tempRange","pixelValue","yScale","xScale","config","xD","yD","xR","yR","forEach","s","numericBuffer","vals","b","w","width","h","height","testLineShape","shapes","Line","testTextBox","TextBox","defaultSize","_sizeScaleD3","_size","stackOrderAscending","series","sums","stackSum","keys","split","d3Shape","stackOrderNone","sort","a","localeCompare","stackOrderDescending","n","length","stackOffsetDiverging","order","dy","yn","yp","m","j","other","charAt","nonDiscrete","_d3Scale","negative","_getPosition","space","pos","Plot","_annotations","_backgroundConfig","duration","fill","_barPadding","_buffer","Bar","BarBuffer","Box","BoxBuffer","Circle","CircleBuffer","LineBuffer","Rect","RectBuffer","_confidenceConfig","c","_shapeConfig","stroke","fillOpacity","constant","_discreteCutoff","_groupPadding","_lineMarkerConfig","colorAssign","_id","_lineMarkers","_previousShapes","_shape","assign","Area","label","_drawLabel","labelBounds","aes","largestRect","points","angle","cx","cy","labelConfig","fontMin","fontResize","ariaLabel","ariaLabelStr","nested","_x","undefined","_y","_x2","_y2","bind","fontMax","fontColor","colorDefaults","dark","colorContrast","fontStroke","fontStrokeWidth","textAnchor","verticalAlign","curve","toUpperCase","colorLegible","strokeWidth","_shapeOrder","_shapeSort","indexOf","_sizeMax","_sizeMin","_sizeScale","_stackOffset","_stackOrder","_timelineConfig","brushing","accessor","_xAxis","AxisBottom","align","_xTest","gridSize","_xConfig","gridConfig","id","_xCutoff","_x2Axis","AxisTop","_x2Test","_x2Config","_yAxis","AxisLeft","_yTest","_yConfig","_yCutoff","_y2Axis","AxisRight","_y2Test","_y2Config","k","str","_aggs","Array","from","Set","title","callback","_filteredData","stackGroup","_groupBy","_ids","join","__d3plus__","hci","_confidence","_drawDepth","lci","shape","_formattedData","rExtent","extent","scales","x2Exists","some","y2Exists","_height","_margin","top","bottom","opp","opp2","opps","parent","_select","transition","_transition","_width","left","right","x2Time","_x2Time","_time","xTime","_xTime","y2Time","_y2Time","yTime","_yTime","date","getValues","axisData","concat","unique","xData","x2Data","yData","y2Data","hasBars","discreteKeys","domains","stackData","stackKeys","groupValues","obj","dd","a1","b1","g","ids","includes","fillerPoint","push","stack","offset","discreteData","p","_xSort","_x2Sort","_ySort","_y2Sort","domainScaleSetup","domain2","xAutoDomain","x2AutoDomain","x2Scale","yAutoDomain","y2AutoDomain","y2Scale","autoScale","fallback","userScale","deviation","mean","yConfigScale","_yConfigScale","toLowerCase","y2ConfigScale","_y2ConfigScale","xConfigScale","_xConfigScale","x2ConfigScale","_x2ConfigScale","Object","Boolean","_baseline","shapeData","res","res2","xDomain","x2Domain","yDomain","y2Domain","defaultConfig","barConfig","labels","tickSize","defaultX2Config","defaultY2Config","showX","showY","yC","locale","_locale","scalePadding","shapeConfig","rotate","yTicks","labelRotation","testGroup","elem","enter","opacity","x2Ticks","xTicks","y2Ticks","configPrep","barLabelFunction","barLabels","String","every","t","maxSize","select","node","ticks","render","yBounds","outerBounds","yWidth","y2Bounds","y2Width","xC","xRangeMax","largestLabel","_lineLabels","lineData","userConfig","lineLabelConfig","fontSizeAccessor","fontSize","fontWeightAccessor","fontWeight","fontFamilyAccessor","fontFamily","paddingAccessor","labelFunction","xEstimate","maxX","labelWidths","f","labelPadding","labelWidth","textWidth","myMaxX","spaceNeeded","labelSpace","xTestRange","_getRange","x2TestRange","x2Bounds","x2Height","xOffsetLeft","topOffset","xOffsetRight","xBounds","xHeight","_padding","horizontalMargin","verticalMargin","yRange","xRange","rectGroup","transform","x2Transform","xGroup","update","x2Group","xTrans","yTransform","yGroup","y2Transform","y2Group","_xFunc","_yFunc","_d3ScaleNegative","annotationGroup","annotation","x0","x1","y0","yOffset","y1","_duration","dataIndex","discreteIndex","events","_on","scaleType","barSize","groups","merge","uniqueIds","xMod","scaleLinear","areaConfig","scaleFunction","area","confidenceConfig","_shapes","firstX","firstY","lastX","lastY","classEvents","e","globalEvents","shapeEvents","on","event","markers","dataShapes","_labelMarkers","exitShapes","_","arguments","lower","upper","_xKey","_x2Key","_xDomain","_x2Domain","_yKey","_y2Key","_yDomain","_y2Domain","Viz","AreaPlot","BarChart","defaultLegend","_legend","legendIds","_legendDepth","barIds","BoxWhisker","_tooltipConfig","_label","l","BumpChart","yConfig","tickFormat","val","xMin","getTime","startData","find","y2Config","xMax","endData","ySort","y2Sort","LinePlot","tau","PI","Radar","_axisConfig","_levels","_metric","_outerPadding","_value","radius","nestedAxisData","nestedGroupData","maxValue","flat","circularAxis","circleConfig","totalAxis","polarAxis","lineHeight","quadrant","parseInt","radians","rotateAnchor","cos","sin","Path","groupData","q","pathConfig","cursor","pointer","xDist","yDist","dists","StackedArea"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}